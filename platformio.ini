[env:teensy41]
platform = teensy
board = teensy41
framework = arduino

# Use deep+ to ensure the linker finds the USBHIDInput base class logic
lib_ldf_mode = deep+

# Keep your existing USB mode
build_flags = -D USB_SERIAL_HID

# FIX: Force Debug mode to use -O2 optimization.
# This resolves the vtable linking error while still allowing debugging.
debug_build_flags = -O2 -ggdb3

lib_deps =
  USBHost_t36
  ftrias/TeensyThreads